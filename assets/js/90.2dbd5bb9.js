(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{980:function(s,a,t){"use strict";t.r(a);var e=t(106),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"reactive-streams-规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reactive-streams-规范"}},[s._v("#")]),s._v(" Reactive Streams 规范")]),s._v(" "),t("h2",{attrs:{id:"一-reactive-streams定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-reactive-streams定义"}},[s._v("#")]),s._v(" 一. Reactive Streams定义")]),s._v(" "),t("blockquote",[t("p",[s._v("Reactive Streams is a standard and specification for Stream-oriented libraries for the JVM that")]),s._v(" "),t("ul",[t("li",[s._v("process a potentially unbounded number of elements")]),s._v(" "),t("li",[s._v("in sequence,")]),s._v(" "),t("li",[s._v("asynchronously passing elements between components,")]),s._v(" "),t("li",[s._v("with mandatory non-blocking backpressure.")])])]),s._v(" "),t("p",[s._v("关键字：")]),s._v(" "),t("ul",[t("li",[s._v("潜在无界性（potentially unbounded）")]),s._v(" "),t("li",[s._v("序列（in sequence）")]),s._v(" "),t("li",[s._v("异步传递（asynchronously passing）")]),s._v(" "),t("li",[s._v("非阻塞背压（non-blocking backpressure）")])]),s._v(" "),t("h2",{attrs:{id:"二-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-api"}},[s._v("#")]),s._v(" 二. API")]),s._v(" "),t("h3",{attrs:{id:"_1-publisher"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-publisher"}},[s._v("#")]),s._v(" 1. Publisher")]),s._v(" "),t("p",[s._v("数据发布者，数据上游")]),s._v(" "),t("p",[t("strong",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Publisher")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("subscribe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subscriber")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("superT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_2-subscriber"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-subscriber"}},[s._v("#")]),s._v(" 2. Subscriber")]),s._v(" "),t("p",[s._v("数据订阅者，数据下游")]),s._v(" "),t("p",[t("strong",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subscriber")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("onSubscribe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subscription")]),s._v(" s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("onNext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("onError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("onComplete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("信号事件：")]),s._v(" "),t("ul",[t("li",[s._v("onSubscribe：当下游订阅时")]),s._v(" "),t("li",[s._v("onNext：当下游接收数据时")]),s._v(" "),t("li",[s._v("onComplete：当数据流（Data Streams）执行完成时")]),s._v(" "),t("li",[s._v("onError：当数据流（Data Streams）执行错误时")])]),s._v(" "),t("h3",{attrs:{id:"_3-subscription"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-subscription"}},[s._v("#")]),s._v(" 3. Subscription")]),s._v(" "),t("p",[s._v("订阅信号控制")]),s._v(" "),t("p",[t("strong",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subscription")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cancel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("信号操作:")]),s._v(" "),t("ul",[t("li",[s._v("request：请求上游元素的数量")]),s._v(" "),t("li",[s._v("cancel：请求停止发送数据并且清除资源")])]),s._v(" "),t("h3",{attrs:{id:"_4-processor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-processor"}},[s._v("#")]),s._v(" 4. Processor")]),s._v(" "),t("p",[s._v("消息发布者和订阅者综合体")]),s._v(" "),t("p",[t("strong",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Processor")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subscriber")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Publisher")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"三-完整了解一下背压-backpressure"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-完整了解一下背压-backpressure"}},[s._v("#")]),s._v(" 三. 完整了解一下背压（Backpressure）")]),s._v(" "),t("h3",{attrs:{id:"_1-维基百科"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-维基百科"}},[s._v("#")]),s._v(" 1. "),t("a",{attrs:{href:"https://en.wikipedia.org/wiki/Back_pressure",target:"_blank",rel:"noopener noreferrer"}},[s._v("维基百科"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[s._v("The term is also used analogously in the field of information technology to describe the build-up of data behind an I/O switch if the buffers are full and incapable of receiving any more data;the transmitting device halts the sending of data packets until the buffers have been emptied and are once more capable of storing information. It also refers to an algorithm for routing data according to congestion gradients (see backpressure routing).")])]),s._v(" "),t("p",[s._v("关键字：")]),s._v(" "),t("ul",[t("li",[s._v("I/O 切换（I/O switch）")]),s._v(" "),t("li",[s._v("缓冲填满（the buffers are full）")]),s._v(" "),t("li",[s._v("数据无法接受（incapable of receiving any more data）")]),s._v(" "),t("li",[s._v("传输设备（transmitting device）")]),s._v(" "),t("li",[s._v("停止发送数据包（halts the sending of data packets）")])]),s._v(" "),t("h3",{attrs:{id:"_2-reactive-streams-jvm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-reactive-streams-jvm"}},[s._v("#")]),s._v(" 2. "),t("a",{attrs:{href:"https://github.com/reactive-streams/reactive-streams-jvm#subscriber-controlled-queue-bounds",target:"_blank",rel:"noopener noreferrer"}},[s._v("Reactive Streams JVM"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[s._v("Backpressure is an integral part of this model in order to allow the queues which mediate between threads to be bounded")]),s._v(" "),t("p",[s._v("Since back-pressure is mandatory the use of unbounded buffers can be avoided. In general,the only time when a queue might grow without bounds is when the publisher side maintains a higher rate than the subscriber for an extended period of time, but this scenario is handled by backpressure instead")])]),s._v(" "),t("p",[s._v("关键字：")]),s._v(" "),t("ul",[t("li",[s._v("线程和边界间调停（mediate between threads to be bounded）")]),s._v(" "),t("li",[s._v("发布者维持速率高于订阅者（publisher side maintains a higher rate than the subscriber）")]),s._v(" "),t("li",[s._v("背压处理（handled by backpressure）")])]),s._v(" "),t("h3",{attrs:{id:"_3-reactor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-reactor"}},[s._v("#")]),s._v(" 3. "),t("a",{attrs:{href:"http://projectreactor.io/docs/core/release/reference/#reactive.backpressure",target:"_blank",rel:"noopener noreferrer"}},[s._v("Reactor"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[s._v("Propagating signals upstream is also used to implement backpressure, which we described in the assembly line analogy as a feedback signal sent up the line when a workstation processes more slowly than an upstream workstation")]),s._v(" "),t("p",[s._v("The real mechanism defined by the Reactive Streams specification is pretty close to the analogy: a subscriber can work in unbounded mode and let the source push all the data at its fastest achievable rate or it can use the "),t("code",[s._v("request")]),s._v(" mechanism to signal the source that it is ready to process at most "),t("code",[s._v("n")]),s._v(" elements")])]),s._v(" "),t("p",[s._v("关键字：")]),s._v(" "),t("ul",[t("li",[s._v("Propagating signals upstream（传播上游信号）")]),s._v(" "),t("li",[s._v("无边界模式（unbounded mode）")]),s._v(" "),t("li",[s._v("处理最大元素数量（process at most n elements）")])]),s._v(" "),t("h3",{attrs:{id:"_4-总结背压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-总结背压"}},[s._v("#")]),s._v(" 4. 总结背压")]),s._v(" "),t("p",[s._v("假设下游Subscriber工作在无边界大小的数据流水线时，当上游Publisher提供数据的速率快于下游Subscriber的消费数据速率时，下游Subscriber将通过传播信号（request）到上游Publisher，请求限制数据的数量（ Demand ）或通知上游停止数据生产")]),s._v(" "),t("ad"),s._v(" "),t("comment")],1)}),[],!1,null,null,null);a.default=n.exports}}]);