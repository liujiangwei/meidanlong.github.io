<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>垃圾回收 | Meiracle</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/assets/me.jpg">
    <script>
  	    var _hmt = _hmt || [];
  	    (function() {
  	      var hm = document.createElement("script");
  	      hm.src = "https://hm.baidu.com/hm.js?301fa1f6c47fde68d9b4bd5a9e660435";
  	      var s = document.getElementsByTagName("script")[0]; 
  	      s.parentNode.insertBefore(hm, s);
  	    })();
  	  </script>
    <meta name="description" content="你能达到什么程度，取决于内心有多渴望">
    <meta name="baidu-site-verification" content="code-usB0NBCiZQ">
    <link rel="preload" href="/assets/css/0.styles.784e941e.css" as="style"><link rel="preload" href="/assets/js/app.a8994a55.js" as="script"><link rel="preload" href="/assets/js/3.eb6c2f87.js" as="script"><link rel="preload" href="/assets/js/20.5711a298.js" as="script"><link rel="preload" href="/assets/js/5.7e3cd7ba.js" as="script"><link rel="preload" href="/assets/js/8.c330ca58.js" as="script"><link rel="prefetch" href="/assets/js/10.81a4b1e1.js"><link rel="prefetch" href="/assets/js/100.bb5f303c.js"><link rel="prefetch" href="/assets/js/101.06df0905.js"><link rel="prefetch" href="/assets/js/102.7268bc2b.js"><link rel="prefetch" href="/assets/js/103.e465f8c0.js"><link rel="prefetch" href="/assets/js/104.b27ad55b.js"><link rel="prefetch" href="/assets/js/105.fa46e8ee.js"><link rel="prefetch" href="/assets/js/106.46b927a7.js"><link rel="prefetch" href="/assets/js/107.eb88c519.js"><link rel="prefetch" href="/assets/js/108.12a00a8b.js"><link rel="prefetch" href="/assets/js/109.78f59e76.js"><link rel="prefetch" href="/assets/js/11.b55a676a.js"><link rel="prefetch" href="/assets/js/110.ea33df90.js"><link rel="prefetch" href="/assets/js/111.a5365602.js"><link rel="prefetch" href="/assets/js/112.72cabae2.js"><link rel="prefetch" href="/assets/js/113.a9e74b66.js"><link rel="prefetch" href="/assets/js/114.6da5fcef.js"><link rel="prefetch" href="/assets/js/115.ce5d4523.js"><link rel="prefetch" href="/assets/js/116.f1db73db.js"><link rel="prefetch" href="/assets/js/117.59771da8.js"><link rel="prefetch" href="/assets/js/118.551033a1.js"><link rel="prefetch" href="/assets/js/119.c61cc6a7.js"><link rel="prefetch" href="/assets/js/12.630b9274.js"><link rel="prefetch" href="/assets/js/120.58f10dfb.js"><link rel="prefetch" href="/assets/js/121.a2832f56.js"><link rel="prefetch" href="/assets/js/122.aca4098b.js"><link rel="prefetch" href="/assets/js/123.8bbd7824.js"><link rel="prefetch" href="/assets/js/124.fec008ae.js"><link rel="prefetch" href="/assets/js/125.e98836be.js"><link rel="prefetch" href="/assets/js/126.9e88ae8d.js"><link rel="prefetch" href="/assets/js/127.28efac03.js"><link rel="prefetch" href="/assets/js/128.14c61f51.js"><link rel="prefetch" href="/assets/js/129.1f2da21a.js"><link rel="prefetch" href="/assets/js/13.4a3c0636.js"><link rel="prefetch" href="/assets/js/130.e60238f2.js"><link rel="prefetch" href="/assets/js/131.451920d9.js"><link rel="prefetch" href="/assets/js/132.44c91b62.js"><link rel="prefetch" href="/assets/js/133.7afb54c2.js"><link rel="prefetch" href="/assets/js/134.2cf8114d.js"><link rel="prefetch" href="/assets/js/135.a0526a74.js"><link rel="prefetch" href="/assets/js/136.4122c186.js"><link rel="prefetch" href="/assets/js/137.bd06ec5c.js"><link rel="prefetch" href="/assets/js/138.4bef2ba8.js"><link rel="prefetch" href="/assets/js/139.c0de36bf.js"><link rel="prefetch" href="/assets/js/14.8af0d6ba.js"><link rel="prefetch" href="/assets/js/140.8f35a97c.js"><link rel="prefetch" href="/assets/js/141.9b026265.js"><link rel="prefetch" href="/assets/js/142.f7e7c19b.js"><link rel="prefetch" href="/assets/js/143.5251879b.js"><link rel="prefetch" href="/assets/js/144.19f633e6.js"><link rel="prefetch" href="/assets/js/145.bb93637a.js"><link rel="prefetch" href="/assets/js/146.af95d626.js"><link rel="prefetch" href="/assets/js/147.c2f788ce.js"><link rel="prefetch" href="/assets/js/148.fad4bdc6.js"><link rel="prefetch" href="/assets/js/149.30662684.js"><link rel="prefetch" href="/assets/js/15.965a9d4d.js"><link rel="prefetch" href="/assets/js/150.5abaaff6.js"><link rel="prefetch" href="/assets/js/151.96edc602.js"><link rel="prefetch" href="/assets/js/152.667089cf.js"><link rel="prefetch" href="/assets/js/153.fbff080a.js"><link rel="prefetch" href="/assets/js/154.94c91506.js"><link rel="prefetch" href="/assets/js/155.3375975c.js"><link rel="prefetch" href="/assets/js/156.f0d0b3d7.js"><link rel="prefetch" href="/assets/js/157.c52fb3f9.js"><link rel="prefetch" href="/assets/js/158.186ea406.js"><link rel="prefetch" href="/assets/js/159.18e6c0cd.js"><link rel="prefetch" href="/assets/js/16.269dc0d7.js"><link rel="prefetch" href="/assets/js/160.002b77b4.js"><link rel="prefetch" href="/assets/js/161.fa96bfe2.js"><link rel="prefetch" href="/assets/js/162.412f7c8f.js"><link rel="prefetch" href="/assets/js/163.bfd3bca5.js"><link rel="prefetch" href="/assets/js/164.ba02c42f.js"><link rel="prefetch" href="/assets/js/165.9f487ffe.js"><link rel="prefetch" href="/assets/js/166.48a4a9f4.js"><link rel="prefetch" href="/assets/js/167.fea67413.js"><link rel="prefetch" href="/assets/js/168.d56b89f7.js"><link rel="prefetch" href="/assets/js/169.723cd7f6.js"><link rel="prefetch" href="/assets/js/17.81c58525.js"><link rel="prefetch" href="/assets/js/170.84be57e6.js"><link rel="prefetch" href="/assets/js/171.092fe7cc.js"><link rel="prefetch" href="/assets/js/172.b0562453.js"><link rel="prefetch" href="/assets/js/173.a6289797.js"><link rel="prefetch" href="/assets/js/174.d5ead853.js"><link rel="prefetch" href="/assets/js/175.cb405c99.js"><link rel="prefetch" href="/assets/js/176.ad0cf5a2.js"><link rel="prefetch" href="/assets/js/177.67145d0e.js"><link rel="prefetch" href="/assets/js/178.7296b925.js"><link rel="prefetch" href="/assets/js/179.c366b80e.js"><link rel="prefetch" href="/assets/js/18.abc7d1a3.js"><link rel="prefetch" href="/assets/js/180.9ab182ac.js"><link rel="prefetch" href="/assets/js/181.710b561b.js"><link rel="prefetch" href="/assets/js/182.6449f5de.js"><link rel="prefetch" href="/assets/js/183.857d69d2.js"><link rel="prefetch" href="/assets/js/184.261ad23e.js"><link rel="prefetch" href="/assets/js/185.9798ea00.js"><link rel="prefetch" href="/assets/js/186.946995a4.js"><link rel="prefetch" href="/assets/js/187.4d7aa83a.js"><link rel="prefetch" href="/assets/js/188.528792cc.js"><link rel="prefetch" href="/assets/js/189.eedca31d.js"><link rel="prefetch" href="/assets/js/19.99146aa3.js"><link rel="prefetch" href="/assets/js/190.0e131eae.js"><link rel="prefetch" href="/assets/js/191.3ed13c24.js"><link rel="prefetch" href="/assets/js/192.0d2b7182.js"><link rel="prefetch" href="/assets/js/193.1eb9a4a5.js"><link rel="prefetch" href="/assets/js/194.2dc7f366.js"><link rel="prefetch" href="/assets/js/195.6b7810b6.js"><link rel="prefetch" href="/assets/js/196.2aea9717.js"><link rel="prefetch" href="/assets/js/197.4d75060a.js"><link rel="prefetch" href="/assets/js/198.e77eb5e3.js"><link rel="prefetch" href="/assets/js/199.2385fef3.js"><link rel="prefetch" href="/assets/js/200.d23f41be.js"><link rel="prefetch" href="/assets/js/201.ae1b6d08.js"><link rel="prefetch" href="/assets/js/202.36216ece.js"><link rel="prefetch" href="/assets/js/203.4c35adec.js"><link rel="prefetch" href="/assets/js/204.0f3daa8a.js"><link rel="prefetch" href="/assets/js/205.3ff033ea.js"><link rel="prefetch" href="/assets/js/206.4349e815.js"><link rel="prefetch" href="/assets/js/207.de1feb7a.js"><link rel="prefetch" href="/assets/js/208.4fa8a0be.js"><link rel="prefetch" href="/assets/js/209.1eee748f.js"><link rel="prefetch" href="/assets/js/21.71aeb783.js"><link rel="prefetch" href="/assets/js/210.cfc91ae5.js"><link rel="prefetch" href="/assets/js/211.9bb25713.js"><link rel="prefetch" href="/assets/js/212.1886e177.js"><link rel="prefetch" href="/assets/js/213.acb1c365.js"><link rel="prefetch" href="/assets/js/214.a7c41548.js"><link rel="prefetch" href="/assets/js/215.bd70fbba.js"><link rel="prefetch" href="/assets/js/216.8e1a2f58.js"><link rel="prefetch" href="/assets/js/217.ec319f80.js"><link rel="prefetch" href="/assets/js/218.8f8cefb4.js"><link rel="prefetch" href="/assets/js/219.30f54d8d.js"><link rel="prefetch" href="/assets/js/22.fa727cac.js"><link rel="prefetch" href="/assets/js/220.2a8f6296.js"><link rel="prefetch" href="/assets/js/221.850f4926.js"><link rel="prefetch" href="/assets/js/222.4081df74.js"><link rel="prefetch" href="/assets/js/223.8e6129bf.js"><link rel="prefetch" href="/assets/js/224.6f464645.js"><link rel="prefetch" href="/assets/js/225.b196562c.js"><link rel="prefetch" href="/assets/js/226.690e512e.js"><link rel="prefetch" href="/assets/js/227.a157cc0a.js"><link rel="prefetch" href="/assets/js/228.986ab999.js"><link rel="prefetch" href="/assets/js/229.13030fb9.js"><link rel="prefetch" href="/assets/js/23.a69b1558.js"><link rel="prefetch" href="/assets/js/230.bc847745.js"><link rel="prefetch" href="/assets/js/231.2de031ce.js"><link rel="prefetch" href="/assets/js/232.202de129.js"><link rel="prefetch" href="/assets/js/233.2b59c3c7.js"><link rel="prefetch" href="/assets/js/234.f0996e75.js"><link rel="prefetch" href="/assets/js/235.cf9c24e0.js"><link rel="prefetch" href="/assets/js/236.addcfc25.js"><link rel="prefetch" href="/assets/js/237.3561ad56.js"><link rel="prefetch" href="/assets/js/238.feadc7ed.js"><link rel="prefetch" href="/assets/js/239.4a3d0ea3.js"><link rel="prefetch" href="/assets/js/24.964f741b.js"><link rel="prefetch" href="/assets/js/240.9cc9fb0f.js"><link rel="prefetch" href="/assets/js/241.f6f4af90.js"><link rel="prefetch" href="/assets/js/242.84d1c1ac.js"><link rel="prefetch" href="/assets/js/243.ffffda8a.js"><link rel="prefetch" href="/assets/js/244.e22753ef.js"><link rel="prefetch" href="/assets/js/245.9a9077bd.js"><link rel="prefetch" href="/assets/js/246.90198784.js"><link rel="prefetch" href="/assets/js/247.8e17ad98.js"><link rel="prefetch" href="/assets/js/248.4ba58bb3.js"><link rel="prefetch" href="/assets/js/249.3a8f610c.js"><link rel="prefetch" href="/assets/js/25.c3c8151c.js"><link rel="prefetch" href="/assets/js/250.09c88c14.js"><link rel="prefetch" href="/assets/js/251.f85c34a9.js"><link rel="prefetch" href="/assets/js/252.112a5f16.js"><link rel="prefetch" href="/assets/js/253.b9edc408.js"><link rel="prefetch" href="/assets/js/254.03b6de50.js"><link rel="prefetch" href="/assets/js/255.81986648.js"><link rel="prefetch" href="/assets/js/256.181220e3.js"><link rel="prefetch" href="/assets/js/257.451de57e.js"><link rel="prefetch" href="/assets/js/258.f2cef25d.js"><link rel="prefetch" href="/assets/js/259.fd2cdea3.js"><link rel="prefetch" href="/assets/js/26.8a94f67d.js"><link rel="prefetch" href="/assets/js/260.fcc5192a.js"><link rel="prefetch" href="/assets/js/261.4962f71a.js"><link rel="prefetch" href="/assets/js/262.d3c7b770.js"><link rel="prefetch" href="/assets/js/263.bf997365.js"><link rel="prefetch" href="/assets/js/264.a6f16e08.js"><link rel="prefetch" href="/assets/js/265.f5453454.js"><link rel="prefetch" href="/assets/js/266.bcc4fd93.js"><link rel="prefetch" href="/assets/js/267.08babe5f.js"><link rel="prefetch" href="/assets/js/268.adb4f889.js"><link rel="prefetch" href="/assets/js/269.4621d9b1.js"><link rel="prefetch" href="/assets/js/27.cc6e7e6a.js"><link rel="prefetch" href="/assets/js/270.91dce59c.js"><link rel="prefetch" href="/assets/js/271.920aa24f.js"><link rel="prefetch" href="/assets/js/272.2693e397.js"><link rel="prefetch" href="/assets/js/273.8483e40a.js"><link rel="prefetch" href="/assets/js/274.776674e9.js"><link rel="prefetch" href="/assets/js/275.5feac1e8.js"><link rel="prefetch" href="/assets/js/276.c33986fe.js"><link rel="prefetch" href="/assets/js/277.30724174.js"><link rel="prefetch" href="/assets/js/278.24950b1d.js"><link rel="prefetch" href="/assets/js/279.8fb4f0a7.js"><link rel="prefetch" href="/assets/js/28.b0eaf008.js"><link rel="prefetch" href="/assets/js/280.bd6f177f.js"><link rel="prefetch" href="/assets/js/281.e125574a.js"><link rel="prefetch" href="/assets/js/282.67f04a29.js"><link rel="prefetch" href="/assets/js/283.e9a81f6b.js"><link rel="prefetch" href="/assets/js/284.dbbf720b.js"><link rel="prefetch" href="/assets/js/285.188cde02.js"><link rel="prefetch" href="/assets/js/286.e3fd1c8c.js"><link rel="prefetch" href="/assets/js/287.20bb8ff8.js"><link rel="prefetch" href="/assets/js/288.64a43b64.js"><link rel="prefetch" href="/assets/js/289.db5f5ede.js"><link rel="prefetch" href="/assets/js/29.dcceb37c.js"><link rel="prefetch" href="/assets/js/290.79acef01.js"><link rel="prefetch" href="/assets/js/291.2cfd6d32.js"><link rel="prefetch" href="/assets/js/292.a9c09c7f.js"><link rel="prefetch" href="/assets/js/293.9a9ff8e2.js"><link rel="prefetch" href="/assets/js/294.dd6fba18.js"><link rel="prefetch" href="/assets/js/295.fbb42ec8.js"><link rel="prefetch" href="/assets/js/296.6491d087.js"><link rel="prefetch" href="/assets/js/30.d5087716.js"><link rel="prefetch" href="/assets/js/31.6213600d.js"><link rel="prefetch" href="/assets/js/32.4fab92de.js"><link rel="prefetch" href="/assets/js/33.f10e55b3.js"><link rel="prefetch" href="/assets/js/34.b58908f5.js"><link rel="prefetch" href="/assets/js/35.0cb21e2e.js"><link rel="prefetch" href="/assets/js/36.9be7ef30.js"><link rel="prefetch" href="/assets/js/37.c956f85d.js"><link rel="prefetch" href="/assets/js/38.6b44bdaf.js"><link rel="prefetch" href="/assets/js/39.741e5706.js"><link rel="prefetch" href="/assets/js/4.7bf3ce14.js"><link rel="prefetch" href="/assets/js/40.67b5d9b3.js"><link rel="prefetch" href="/assets/js/41.254602e2.js"><link rel="prefetch" href="/assets/js/42.7d134277.js"><link rel="prefetch" href="/assets/js/43.5f95cd3e.js"><link rel="prefetch" href="/assets/js/44.bc53868a.js"><link rel="prefetch" href="/assets/js/45.5b2ab139.js"><link rel="prefetch" href="/assets/js/46.de96a4eb.js"><link rel="prefetch" href="/assets/js/47.4f197efe.js"><link rel="prefetch" href="/assets/js/48.852259ec.js"><link rel="prefetch" href="/assets/js/49.284b7b74.js"><link rel="prefetch" href="/assets/js/50.ae2ac042.js"><link rel="prefetch" href="/assets/js/51.99a0df3c.js"><link rel="prefetch" href="/assets/js/52.a49b3983.js"><link rel="prefetch" href="/assets/js/53.ff1efca0.js"><link rel="prefetch" href="/assets/js/54.944e90a1.js"><link rel="prefetch" href="/assets/js/55.f6cc6325.js"><link rel="prefetch" href="/assets/js/56.cefc1453.js"><link rel="prefetch" href="/assets/js/57.f9e72096.js"><link rel="prefetch" href="/assets/js/58.0a71a5ba.js"><link rel="prefetch" href="/assets/js/59.ad6fc018.js"><link rel="prefetch" href="/assets/js/6.843c8b34.js"><link rel="prefetch" href="/assets/js/60.d669cd28.js"><link rel="prefetch" href="/assets/js/61.85659c6e.js"><link rel="prefetch" href="/assets/js/62.49a43f29.js"><link rel="prefetch" href="/assets/js/63.2f985275.js"><link rel="prefetch" href="/assets/js/64.fd7a0051.js"><link rel="prefetch" href="/assets/js/65.19f87fff.js"><link rel="prefetch" href="/assets/js/66.f42ba370.js"><link rel="prefetch" href="/assets/js/67.5ac9d19b.js"><link rel="prefetch" href="/assets/js/68.5c24f357.js"><link rel="prefetch" href="/assets/js/69.8ab97add.js"><link rel="prefetch" href="/assets/js/7.11fce5e6.js"><link rel="prefetch" href="/assets/js/70.3b227931.js"><link rel="prefetch" href="/assets/js/71.01027679.js"><link rel="prefetch" href="/assets/js/72.e548a270.js"><link rel="prefetch" href="/assets/js/73.6256cc58.js"><link rel="prefetch" href="/assets/js/74.18a5550a.js"><link rel="prefetch" href="/assets/js/75.93e8d2c5.js"><link rel="prefetch" href="/assets/js/76.84b2c5bd.js"><link rel="prefetch" href="/assets/js/77.634d1b42.js"><link rel="prefetch" href="/assets/js/78.eb0434d1.js"><link rel="prefetch" href="/assets/js/79.1e19d71f.js"><link rel="prefetch" href="/assets/js/80.584fd319.js"><link rel="prefetch" href="/assets/js/81.95e81585.js"><link rel="prefetch" href="/assets/js/82.7f082311.js"><link rel="prefetch" href="/assets/js/83.1c53e304.js"><link rel="prefetch" href="/assets/js/84.0311b816.js"><link rel="prefetch" href="/assets/js/85.66243ff4.js"><link rel="prefetch" href="/assets/js/86.aeda5e75.js"><link rel="prefetch" href="/assets/js/87.b3c3627c.js"><link rel="prefetch" href="/assets/js/88.c7a1776e.js"><link rel="prefetch" href="/assets/js/89.96a0353d.js"><link rel="prefetch" href="/assets/js/9.d9ba5b88.js"><link rel="prefetch" href="/assets/js/90.2dbd5bb9.js"><link rel="prefetch" href="/assets/js/91.f9aa0945.js"><link rel="prefetch" href="/assets/js/92.b30a243e.js"><link rel="prefetch" href="/assets/js/93.e6e9c16a.js"><link rel="prefetch" href="/assets/js/94.f4c26ce3.js"><link rel="prefetch" href="/assets/js/95.7a6b1e58.js"><link rel="prefetch" href="/assets/js/96.d76e4c2f.js"><link rel="prefetch" href="/assets/js/97.d10edb4d.js"><link rel="prefetch" href="/assets/js/98.5c504797.js"><link rel="prefetch" href="/assets/js/99.0ae0c814.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8176673f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.784e941e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">Meiracle</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/sprica/">
          SPRICA
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/call/">
          连环call
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          博客专栏
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          学习笔记
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          常见问答
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span></span> <span class="arrow down"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/language/java/jvm/" aria-current="page" title="JVM" class="sidebar-link">JVM</a></li><li><a href="/blog/language/java/jvm/1_neicunmoxing.html" title="JVM 基础" class="sidebar-link">JVM 基础</a></li><li><a href="/blog/language/java/jvm/2_lajihuishou.html" aria-current="page" title="垃圾回收" class="active sidebar-link">垃圾回收</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/language/java/jvm/2_lajihuishou.html#三个问题" title="三个问题" class="sidebar-link">三个问题</a></li><li class="sidebar-sub-header"><a href="/blog/language/java/jvm/2_lajihuishou.html#垃圾回收算法" title="垃圾回收算法" class="sidebar-link">垃圾回收算法</a></li><li class="sidebar-sub-header"><a href="/blog/language/java/jvm/2_lajihuishou.html#垃圾回收器" title="垃圾回收器" class="sidebar-link">垃圾回收器</a></li></ul></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="垃圾回收"><a href="#垃圾回收" class="header-anchor">#</a> 垃圾回收</h1> <h2 id="三个问题"><a href="#三个问题" class="header-anchor">#</a> 三个问题</h2> <ol><li>什么场景下使用什么垃圾回收策略
<ul><li>对内存要求苛刻的场景：想办法提高对象的回收效率，多回收掉一些对象，腾出更多的空间</li> <li>CPU使用率高的情况下：降低高并发时垃圾回收的频率，让CPU更多的去执行你的业务而不是垃圾回收</li></ul></li> <li>垃圾回收主要发生在哪些区域
<ul><li>线程隔离区域，随着线程的创建而创建，随着线程的消亡而消亡</li> <li>堆和方法区是需要考虑垃圾回收的区域，而堆是垃圾回收的主要区域，主要回收的是我们创建的对象。而方法区则回收废弃的常量和不需要使用的类</li></ul></li> <li>对象在什么时候能被回收呢？主要有两种算法
<ol><li>引用计数法： 通过对象的引用计数器来判断对象是否被引用了。
<ul><li>只要有一个对象引用了对象A，A的引用计数器就会加1，同理当引用失效的时候，A的引用计数器就会减1。如果A的引用计数器的值变为0的话，就说明没有对象引用了</li> <li>引用计数法简单高效，但是无法解决循环引用的情况，所以java不选择该算法</li></ul></li> <li>可达性分析：以根对象（GC Roots）作为起点向下搜索，走过的路径被称为引用链（Reference Chain），如果某个对象到根对象没有引用链时，就认为这个对象是不可达的，可以回收
<ul><li>那么哪些对象可以作为根对象呢？</li></ul> <ol><li>虚拟机栈（栈帧中的本地变量表）中引用的对象 -&gt; 一般是一些局部变量</li> <li>方法区中类静态属性引用的对象</li> <li>方法区中常量引用的对象</li> <li>本地方法栈中JNI（即native方法）引用的对象</li></ol> <ul><li>什么是引用呢？</li></ul> <ol><li>强引用 new出来的对象引用，只要强引用存在，永远不会回收被引用的对象，哪怕是内存溢出</li> <li>软引用 <code>SoftReference&lt;String&gt;</code> 用来描述有用，但不是必须的对象。软引用关联的对象只有在内存不足的时候才会被回收。比价时候做缓存，如网页缓存、图片缓存等</li> <li>弱引用 <code>WeakReference&lt;String&gt;</code> 也是用来描述非必需对象的，当JVM垃圾回收的时候，不管内存是否充足都会回收被弱引用关联的对象</li> <li>虚引用 <code>ReferenceQueue&lt;String&gt;</code> 不影响对象的生命周期，如果一个对象只有虚引用，就相当于没有引用一样，在任何时候都有可能被垃圾回收，主要用于跟踪对象被垃圾回收器回收的活动，需配合引用队列使用</li></ol> <ul><li>可达性算法注意点</li></ul> <ol><li>一个对象不可达，也不一定会被回收，只是死缓</li> <li>想要真正处死一个对象的流程大致是这样的
<ol><li>符合对象没有引用链和GC Roots链接</li> <li>有无必要执行finalize()</li> <li>有必要的话，将对象放入F-Queue队列中，使用一个低优先级的线程来执行对象的finalize方法</li> <li>如果在调用对象的finalize方法中，对象与其他对象重新建立连接，或者对象自救，则会将该对象从F-Queue队列中移除</li> <li>否则的话，则会回收该对象</li></ol></li></ol></li></ol></li></ol> <h2 id="垃圾回收算法"><a href="#垃圾回收算法" class="header-anchor">#</a> 垃圾回收算法</h2> <ol><li>标记 - 清除：
<ol><li>标记需要回收的对象</li> <li>清理掉需要回收的对象</li> <li>缺点：
<ol><li>遍历空闲链表需要消耗时间，极端情况下需要遍历完全部链表才能确定对象该分配到哪里去，或者无法分配</li> <li>效率不高，标记和清除的效率都不高</li> <li>标记清除后产生大量不连续的内存碎片，从而导致在分配大对象时触发GC</li></ol></li></ol></li> <li>复制：
<ol><li>把内存分为两块，每次只使用其中的一块</li> <li>将正在使用中的内存中的存活对象，复制到未使用的内存中去，然后清除掉正在使用的的内存中的所有对象</li> <li>交换两个内存的角色，等待下一次被回收</li> <li>hotSpot默认Eden和Survivor比是8:1，也就是每次能使用90%的新生代空间</li> <li>如果Survivor空间不够，就要依赖老年代进行分配担保，把放不下的对象直接进入老年代。什么是分配担保？
<ul><li>新生代空间放置不下：1. 对象很多，Eden+某一块Survivor区的对象空间 &gt; Eden+另一块Survivor区的空间。 2. 新对象很大，大于新生代剩余空间</li> <li>Minor GC前，JVM会检查老年代的最大可用的连续空间，是否大于新生代所有对象的总空间，如果大于，可以确保Minor GC是安全的</li> <li>如果小于，JVM会首先检查是否设置了允许担保失败，如果允许，则检查老年代最大可用连续空间，是否大于历次晋升到老年代对象的平均大小</li> <li>如果老年代可以空间大于历次晋升到老年代对象的平均大小，尝试一次MinorGC</li> <li>否则执行fullGC</li></ul></li> <li>缺点：
<ol><li>内存利用率低</li></ol></li></ol></li> <li>标记 - 整理：
<ol><li>标记需要回收的对象</li> <li>把存活的对象压缩到内存的一端</li> <li>清除掉边界外的所有空间</li> <li>缺点：
<ol><li>整理存在开销</li></ol></li></ol></li> <li>分代收集算法
<ul><li>新生代回收（Minor GC ｜ Young GC）
<ul><li>触发条件：Eden空间不足</li></ul></li> <li>老年代回收 (Major GC)，Major GC 时常会伴随着 Minor GC，所以 Major GC 约等于 Full GC</li> <li>清理整个堆（Full GC）
<ul><li>触发条件：
<ol><li>老年代空间不足：空间真的不足 和 内存碎片导致没有连续的内存</li> <li>元空间不足</li> <li>要晋升老年代的对象所占用的空间大于老年代剩余空间</li> <li>显式的调用的System.gc()
<ul><li>建议垃圾回收器执行垃圾回收</li> <li>-XX:+DisableExplicitGC 参数，忽略 System.gc() 调用</li></ul></li></ol></li></ul></li> <li>注意：
<ul><li>新建的对象不一定分配到伊甸园 ： 1. 大于 -XX:PretenureSizeThrehold 阈值。 2. 新生代空间不够</li> <li>对象不一定达到年龄才进入老年代 ：动态年龄：如果Survivor区里面，所有相同年龄的对象的大小总和大于Survivor空间的一半，那么年龄大于这个年龄的对象会直接进入老年代</li></ul></li> <li>调优原则：
<ul><li>合理设置Survivor区大小，避免内存浪费</li> <li>让GC尽可能发生在新生代，避免FullGC</li></ul></li></ul></li> <li>增量算法
<ul><li>每次只收集一小片内存的垃圾，减少系统的停顿</li></ul></li></ol> <h2 id="垃圾回收器"><a href="#垃圾回收器" class="header-anchor">#</a> 垃圾回收器</h2> <ul><li>垃圾回收算法为垃圾回收提供理论支持</li> <li>垃圾回收器利用垃圾回收算法，实现垃圾回收的实践落地</li></ul> <ol><li>术语：
<ol><li>Stop The World：
<ul><li>简写为STW，也叫全局停顿。Java代码停止运行，Native代码继续运行，但是不能与JVM交互</li> <li>原因：多半由于垃圾回收导致；也可能是Dump线程、死锁检查或Dump堆等</li> <li>危害：服务停止、没有响应；主从切换，危害生产环境</li></ul></li> <li>并行收集和并发收集：
<ul><li>并行收集：指多个垃圾收集线程并行工作，但是收集工程中用户线程（业务线程） 还是处于等待状态的</li> <li>并发收集：指用户线程和垃圾收集线程同时工作</li></ul></li> <li>吞吐量：
<ul><li>CPU用于运行用户代码的时间与CPU总消耗时间的比值</li> <li>运行用户代码的时间/（运行用户代码的时间 + 垃圾回收的时间）</li></ul></li> <li>安全点：
<ul><li>当线程运行到这个位置的时候，线程的一些状态是可以被确定的</li> <li>这些特定的位置主要有：
<ol><li>循环的末尾</li> <li>方法临返回前 / 调用方法的call指令后</li> <li>可能抛异常的位置</li></ol></li></ul></li></ol></li> <li>Serial
<ul><li>单线程</li> <li>简单高效，无线程交互的开销</li> <li>收集过程用户线程全程STW</li> <li>适用于客户端程序，如：java -client -jar XXX 和 单核机器</li></ul></li> <li>ParNew
<ul><li>Serial的多线程版本</li> <li>JVM参数、STW表现和垃圾收集算法 同Serial</li> <li>多线程，可使用 -XX:ParallelGCThreads设置垃圾收集线程数，一般使用CPU核心数</li></ul></li> <li>Parallel Scavenge
<ul><li>吞吐量优先收集器</li> <li>采用的也是复制算法</li> <li>也是并行的多线程收集器，这一点和 ParNew 类似</li> <li>可以达到一个可控制的吞吐量
<ul><li>-XX:MaxGCPauseMillis: 控制最大的垃圾收集停顿时间（尽力）</li> <li>-XX:GCTimeRatio: 设置吞吐量的大小，取值0-100，系统花费不超过1/(1+n)的时间用于垃圾收集</li> <li>-XX:+UseAdptiveSizePolicy 打开自适应GC策略：打开后无需手动设置新生代的大小（-Xmn）、Eden与Survivor区的比例（-XX:SurviviorRatio）等参数。虚拟机会自动根据系统运行的情况收集性能监控信息，动态地调整这些参数，从而达到最优的的停顿时间以及最高的吞吐量</li></ul></li> <li>适用于注重吞吐量的场景</li></ul></li> <li>Serial Old
<ul><li>Serial收集器的老年代版本</li> <li>标记-整理算法</li> <li>可以和Serial/ParNew/Parallel Scavenge 这三个新生代的垃圾收集器配合使用</li> <li>CMS收集器出现故障，也会使用 Serial Old 作为后备</li></ul></li> <li>Parallel Old
<ul><li>Parallel Scavenge收集器老年代版本</li> <li>标记-整理算法</li> <li>只能和Parallel Scavenge配合使用</li> <li>适用于关注吞吐量的场景</li></ul></li> <li>CMS
<ul><li>全称：Concurrent Mark Sweep</li> <li>并发收集器</li> <li>标记-清除算法</li> <li>步骤：
<ol><li>初始标记（initial mark）：
<ul><li>标记根对象能直接关联到的对象</li> <li>STW</li></ul></li> <li>并发标记（concurrent mark）：
<ul><li>找到所有GC Roots能够关联到的对象，耗时稍长</li> <li>并发执行，无STW</li></ul></li> <li>并发预清理（concurrent-perclean）：
<ul><li>重新标记那些在并发标记阶段，引用被更新的对象，从而减少后面重新标记的工作量</li> <li>并发执行，无STW</li> <li>可使用 -XX:-CMSPercleaningEable关闭并发预清理阶段，默认打开</li></ul></li> <li>并发可终止预清理（concurrent-abortable-perclean）：
<ul><li>和 并发预清理 做的事情一样，并发执行，无STW</li> <li>当Eden的使用量大于CMSScheduleRemarkEdenSizeThrehold的阈值（默认2M）时，才会打开</li> <li>主要作用：允许我们能够控制预清理阶段的结束时机。比如扫描多长时间（CMSMaxAbortablePrecleanTime,默认5s）,或者Eden区使用占比达到一定阈值（CMSScheduleRemarkEdenPenetration,默认50%）就结束本阶段</li></ul></li> <li>重新标记（remark）
<ul><li>修正并发期间，因为用户程序继续执行，导致标记发生变动的那些对象的标记</li> <li>一般来说，重新标记话费的时间要比初试标记阶段长一些，比并发标记的时间短一些</li> <li>存在STW</li></ul></li> <li>并发清除（concurrent sweep）：<strong>标记-清除 算法</strong> <ul><li>基于标记结果，清除掉前面标记出来的垃圾</li> <li>并发执行，无STW</li> <li>为何不“并发-整理”呢？ 因为是并发执行，如果整理对象的话需要移动对象的位置，很难保证程序不出问题</li></ul></li> <li>并发重置（concurrent reset）
<ul><li>清理本次CMS的上下文信息，为下一次GC作准备</li></ul></li></ol></li> <li>优点：
<ul><li>STW时间短</li> <li>大多数过程都是并发执行</li></ul></li> <li>缺点：
<ul><li>CPU资源比较敏感 - 并发阶段可能导致应用吞吐量降低</li> <li>无法处理浮动垃圾</li> <li>不能等到老年代几乎满了才开始收集，需预留一部分内存。
<ul><li>预留内存不够 -&gt; Concurrent Mode Failure -&gt; Serial Old作为后备</li> <li>使用CMSInitiatingOccupancyFraction设置老年代占比达到多少就触发垃圾收集，默认68%</li></ul></li> <li>内存碎片，基于标记-清除算法
<ul><li>UseCMSCompactAtFullCollection:在full GC后是否要进行内存碎片整理，默认开启</li> <li>CMSFUllGCsBeforeCompaction：在进行几次full GC后就进行一次内存碎片的整理，默认为0</li></ul></li></ul></li> <li>适用于希望系统停顿时间短，响应速度快的场景，比如各种服务器应用程序</li></ul></li> <li>G1
<ul><li>Garbge First</li> <li>面向服务器端应用的垃圾收集器</li> <li>G1把Java堆划分成了若干个大小相等的区域，每一个区域叫做region</li> <li>region的大小可以通过 -XX:G1HeapRegionSize 来指定，取值范围是1～32MB，且必须为2的整数幂</li> <li>同一个代里面的对象可能是不连续的</li> <li>Humongous 是用来存储大对象的，某个对象的大小超过了region的一半就认为是大对象。如果一个对象大于一个region的大小，那么会存放在多个连续的region当中。事实上，G1会把Humongous也看作是老年代的一部分</li> <li>设计思想
<ul><li>内存分块（Region）</li> <li>跟踪每一个Region中垃圾堆积的价值大小</li> <li>构建一个优先列表，根据允许的收集时间，优先回收价值高的region</li></ul></li> <li>垃圾收集机制
<ul><li>Young GC ：
<ul><li>所有的Eden region满了之后，就会触发YoungGC</li> <li>Eden region的对象都会转移到Survivor Region里面去</li> <li>原先Survivor Region中的对象会转移到其他的Survivor Region中，或者晋升到Old Region</li> <li>空闲的Region会被放入空闲列表中，等待下一次被使用</li></ul></li> <li>Mixed GC
<ul><li>老年代大小占整个堆的百分比达到一定阈值的时候，会触发Mixed GC。可使用 -XX:InitiatingHeapOccupancyPercent 指定，默认45%</li> <li>Mixed GC会回收所有的Young Region和 <strong>部分</strong>（根据回收的时间和垃圾堆积的价值来选择的） Old Region</li> <li>执行过程：
<ol><li>初始标记（initial mark）：
<ul><li>标记根对象能直接关联到的对象</li> <li>STW</li></ul></li> <li>并发标记（concurrent mark）：
<ul><li>找到所有GC Roots能够关联到的对象，耗时稍长</li> <li>并发执行，无STW</li></ul></li> <li>最终标记（final mark）
<ul><li>修正并发期间，因为用户程序继续执行，导致标记发生变动的那些对象的标记</li> <li>存在STW</li></ul></li> <li>筛选回收（Live Data Counting and Evacuation）:
<ul><li>对各个Region的回收价值和成本进行排序</li> <li>根据用户所期望的停顿时间（MaxGCPauseMillis）来指定回收计划，并选择一些Region进行回收</li> <li>回收过程：<strong>复制 算法</strong> <ol><li>选择一系列Region构成一个回收集set</li> <li>把决定回收的Region中存活的对象复制到空的Region中</li> <li>删除掉需回收的Region -&gt; 无内存碎片</li> <li>筛选阶段存在STW</li></ol></li></ul></li></ol></li> <li>除了并发标记，其他都存在STW，但是由于只清理堆的部分区域，所以STW的时长是可控的</li></ul></li> <li>Full GC
<ul><li>复制对象内存不够，或者无法分配足够内存（比如大对象没有连续的Region分配）时，就会触发FullGC</li> <li>触发FullGC，使用的是Serial Old模式，会长时间STW</li></ul></li></ul></li> <li>G1优化原则，尽可能减少FullGC的发生，优化思路：
<ol><li>增大预留内存（增大-XX:G1ReservePercent,默认为堆的10%）</li> <li>更早的回收垃圾（减少 -XX:InitiatingHeapOccupancyPercent，默认45%，老年代达到该值就触发Mixed GC）</li> <li>增加并发阶段使用的线程数（增大 -XX:ConcGCThreads），会影响吞吐量</li></ol></li> <li>特点：
<ol><li>作用在整个堆</li> <li>可控的停顿时间  MaxGCPauseMillis=200</li> <li>无内存碎片</li></ol></li> <li>适用场景：
<ol><li>占用内存较大的应用（6G以上）</li> <li>替换CMS收集器</li></ol></li></ul></li></ol> <blockquote><p>Serial：采用复制算法<br>
Parallel New（并行）：采用复制算法<br>
Parallel Scavenge（并行）：采用复制算法<br>
Serial Old（串行）：采用标记-整理算法<br>
Parallel Old（并行）：采用标记-整理算法<br>
CMS：采用标记-清除算法<br>
G1：采用复制算法</p></blockquote> <div><div role="separator" class="ant-divider ant-divider-horizontal ant-divider-with-text-center"><span class="ant-divider-inner-text">推广</span></div> <div class="ad ant-card ant-card-bordered ant-card-hoverable"><div class="ant-card-cover"><img alt="example" src="https://img-blog.csdnimg.cn/img_convert/fb2cd43e5774f7cffbd9e30d33fca812.png"></div><div class="ant-card-body"> <p>推荐一个<span class="mark-orange">性能优秀</span>、<span class="mark-orange">稳定</span>的小众云服务器-小鸟云</p> <p>亲测与其他大型的互联网厂商的产品体验没有什么不同，但是个人学习使用和科学上网<span class="mark-orange">便宜</span>才是王道！</p> <p>使用我的推荐码：<span class="mark-pink">ZR2GGE</span> 购买云服务器和主机可以在官网<span class="mark-orange">优惠</span>的基础上<span class="mark-orange">再打85折</span></p> <p>新用户可以点击这个链接直达：<a href="https://www.niaoyun.com/?u=JPHJ68">https://www.niaoyun.com/?u=JPHJ68</a></p></div></div></div> <div class="gitalk-container"><div id="gitalk-container"></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/27/2021, 9:46:39 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blog/language/java/jvm/1_neicunmoxing.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        JVM 基础
      </a></span> <!----></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a8994a55.js" defer></script><script src="/assets/js/3.eb6c2f87.js" defer></script><script src="/assets/js/20.5711a298.js" defer></script><script src="/assets/js/5.7e3cd7ba.js" defer></script><script src="/assets/js/8.c330ca58.js" defer></script>
  </body>
</html>